<!doctype html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Rails Hotline: (877) 817-4190</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <link rel="stylesheet" href="stylesheets/style.css?v=2">
</head>

<body>
  <div id="container">
    <header>
      RailsHotline.com : 1 (877) 817-4190
    </header>
    <div id="main" role="main">
      <h2>Have a Ruby or Rails question?</h2>
      <h1>Call a pro: (877) 817-4190</h1>
    </div>
    <div id="operators" style="display:none;">
      <h3><span id="operators-count"></span> on call now:</h3>
      <ul></ul>
      Want to volunteer to take calls? <a href="https://spreadsheets.google.com/a/pockethotline.com/spreadsheet/embeddedform?formkey=dEk2TWt6YUZ6OE1WSWN5OHhXSkFyemc6MQ">Apply now</a>
    </div>
    <footer>
      <a href="http://www.pockethotline.com">Community Powered Hotline from Pocket Hotline</a>
    </footer>
  </div> <!-- eo #container -->


  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
  <script src="javascripts/gravatar.js"></script>
  <script>
    // handles the response from pocket hotline
    // needs to be above the getJSON call (and must! be called parsePocketHotlineResponse)
    function parsePocketHotlineResponse(data) {

       // grab the operators
       var items = [];
       $.each(data, function(key, val) {
         user = '<li class="user">';
         user += '<h4 class="name">' + val['user']['name'] + '</h4>';
         // todo check for gravatar, bio, and twitter before adding
         user += '<img class="profile" src="' + get_gravatar(val['user']['email'], 50) + '" />';
         user += '<p>' + val['user']['bio'] + '</p>';
         user += '<a href="http://twitter.com/' + val['user']['twitter'] + '">@' + val['user']['twitter'] + '</a>';
         user += '</li>';
         items.push(user);
       });
       $('#operators ul').html(items.join(''))

       // update count
       result = data.length + ' volunteer operator'
       if (data.length != 1) {
         result += 's'
       }
       $('#operators-count').html(result);
       
       // show operators sidebar
       $('#operators').show();
     }

    // request the on call list from pocket hotline
    $(function() {
      $.getJSON('http://rails.pockethotline.com/api?jsoncallback=?');
    });
  </script>

  <script>
    var _gaq=[["_setAccount","UA-22349438-2"],["_trackPageview"]]; // Change UA-XXXXX-X to be your site's ID 
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
    g.src=("https:"==location.protocol?"https://":"http://www")+".google-analytics.com/ga.js";
    s.parentNode.insertBefore(g,s)}(document,"script"));
  </script>

</body>
</html>